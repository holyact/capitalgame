<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°˜ì‘í˜• ìˆ˜ë„ í€´ì¦ˆ ê²Œì„</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font - Inter -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
            background-color: #e0f2f7;
            /* ëª¨ë°”ì¼ì—ì„œ ë¶ˆí•„ìš”í•œ ìŠ¤í¬ë¡¤ ë°©ì§€ ë° ì¤‘ì•™ ì •ë ¬ */
            overflow-x: hidden;
        }
        .card {
            box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        .btn-primary {
            transition: all 0.2s;
            touch-action: manipulation; /* ëª¨ë°”ì¼ í„°ì¹˜ ë°˜ì‘ ì†ë„ í–¥ìƒ */
        }
        .btn-primary:active {
            transform: scale(0.98);
        }
        .option-btn {
            border-width: 2px;
            touch-action: manipulation;
        }
        .option-btn:active:not(:disabled) {
            transform: scale(0.97);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 sm:p-6 md:p-8">

    <div id="game-container" class="w-full max-w-lg mx-auto">
        <!-- Header: ë°˜ì‘í˜• í…ìŠ¤íŠ¸ í¬ê¸° ì ìš© -->
        <header class="text-center mb-6 sm:mb-10">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-teal-600 mb-2">ğŸŒ ìˆ˜ë„ í€´ì¦ˆ ì±Œë¦°ì§€</h1>
            <p class="text-base sm:text-lg text-gray-600">êµ­ê°€ì˜ ìˆ˜ë„ë¥¼ ë³´ê¸° ì¤‘ì—ì„œ ê³¨ë¼ë³´ì„¸ìš”!</p>
        </header>

        <div class="bg-white card rounded-2xl p-6 sm:p-8 space-y-4 sm:space-y-6">

            <!-- Score and Status -->
            <div class="flex justify-between items-center pb-4 border-b border-gray-100">
                <div class="text-base sm:text-lg font-semibold text-gray-700">
                    ì ìˆ˜: <span id="score" class="text-teal-500 font-bold">0</span>
                </div>
                <div class="text-base sm:text-lg font-semibold text-gray-700">
                    <span id="question-count">1/18</span>
                </div>
            </div>

            <!-- Question Area: êµ­ê°€ ì´ë¦„ í¬ê¸°ë¥¼ í™”ë©´ì— ë”°ë¼ ì¡°ì ˆ -->
            <div id="question-area" class="text-center min-h-[120px] sm:min-h-[150px] flex flex-col justify-center">
                <p class="text-lg sm:text-xl text-gray-500 mb-2" id="instruction-text">ì´ êµ­ê°€ì˜ ìˆ˜ë„ëŠ”?</p>
                <h2 id="country-name" class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-gray-900 break-keep">ë‚˜ë¼ ì´ë¦„</h2>
            </div>

            <!-- Options & Interaction Area -->
            <div class="space-y-4">
                <!-- ìˆ˜ë„ ì„ íƒ ì˜µì…˜: ëª¨ë°”ì¼ì—ì„œëŠ” í•œ ì¤„, íƒœë¸”ë¦¿ ì´ìƒì—ì„  ë‘ ì¤„ -->
                <div id="options-container" class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                    <!-- JavaScriptì—ì„œ ë²„íŠ¼ ìƒì„± -->
                </div>

                <div id="feedback" class="min-h-[28px] text-center text-base sm:text-lg font-medium py-2">
                    <!-- ê²°ê³¼ ë©”ì‹œì§€ í‘œì‹œ ì˜ì—­ -->
                </div>

                <button
                    id="next-button"
                    onclick="loadNextQuestion()"
                    class="btn-primary w-full py-4 bg-gradient-to-r from-green-300 to-teal-400 text-white font-bold rounded-xl text-lg sm:text-xl hover:from-green-400 hover:to-teal-500 focus:outline-none focus:ring-4 focus:ring-green-200 shadow-lg shadow-green-300/50 hidden"
                >
                    ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™ â†’
                </button>
            </div>
        </div>

        <!-- Footer / Credits -->
        <footer class="mt-8 text-center text-gray-400 text-sm">
            Â© 2024 Capital Quiz Challenge
        </footer>

        <!-- Game Over Modal: ê³ ì • ë ˆì´ì•„ì›ƒ ë° ë°˜ì‘í˜• í¬ê¸° -->
        <div id="game-over-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center p-4 bg-gray-900/80 backdrop-blur-sm">
            <div class="bg-white rounded-2xl p-8 text-center max-w-xs sm:max-w-sm w-full space-y-6 shadow-2xl">
                <h3 class="text-3xl font-bold text-teal-700">ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰</h3>
                <div>
                    <p class="text-lg text-gray-600">ë‹¹ì‹ ì˜ ìµœì¢… ì ìˆ˜</p>
                    <p id="final-score" class="text-5xl font-extrabold text-pink-500 mt-2">0 / 18</p>
                </div>
                <button
                    onclick="restartGame()"
                    class="btn-primary w-full py-4 bg-gradient-to-r from-pink-400 to-purple-400 text-white font-bold rounded-xl text-lg hover:from-pink-500 hover:to-purple-500 focus:ring-pink-300 shadow-lg shadow-pink-300/50"
                >
                    í•œ ë²ˆ ë” ë„ì „í•˜ê¸°
                </button>
            </div>
        </div>
    </div>

    <script>
        let score = 0;
        let questions = [];
        let currentQuestionIndex = 0;
        let isAnswered = false;

        const allQuestions = [
            { country: "ëŒ€í•œë¯¼êµ­", capital: "ì„œìš¸" },
            { country: "ì¼ë³¸", capital: "ë„ì¿„" },
            { country: "ë¯¸êµ­", capital: "ì›Œì‹±í„´ D.C." },
            { country: "í”„ë‘ìŠ¤", capital: "íŒŒë¦¬" },
            { country: "ì˜êµ­", capital: "ëŸ°ë˜" },
            { country: "ë…ì¼", capital: "ë² ë¥¼ë¦°" },
            { country: "ì¤‘êµ­", capital: "ë² ì´ì§•" },
            { country: "ë¸Œë¼ì§ˆ", capital: "ë¸Œë¼ì§ˆë¦¬ì•„" },
            { country: "ìºë‚˜ë‹¤", capital: "ì˜¤íƒ€ì™€" },
            { country: "í˜¸ì£¼", capital: "ìº”ë²„ë¼" },
            { country: "ì´íƒˆë¦¬ì•„", capital: "ë¡œë§ˆ" },
            { country: "ìŠ¤í˜ì¸", capital: "ë§ˆë“œë¦¬ë“œ" },
            { country: "ëŸ¬ì‹œì•„", capital: "ëª¨ìŠ¤í¬ë°”" },
            { country: "ì¸ë„", capital: "ë‰´ë¸ë¦¬" },
            { country: "ë©•ì‹œì½”", capital: "ë©•ì‹œì½”ì‹œí‹°" },
            { country: "ì´ì§‘íŠ¸", capital: "ì¹´ì´ë¡œ" },
            { country: "íƒœêµ­", capital: "ë°©ì½•" },
            { country: "ìŠ¤ìœ„ìŠ¤", capital: "ë² ë¥¸" }
        ];

        const countryNameEl = document.getElementById('country-name');
        const feedbackEl = document.getElementById('feedback');
        const scoreEl = document.getElementById('score');
        const questionCountEl = document.getElementById('question-count');
        const nextButton = document.getElementById('next-button');
        const gameOverModal = document.getElementById('game-over-modal');
        const finalScoreEl = document.getElementById('final-score');
        const optionsContainer = document.getElementById('options-container');

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function initializeGame() {
            score = 0;
            currentQuestionIndex = 0;
            isAnswered = false;
            questions = shuffleArray([...allQuestions]);
            gameOverModal.classList.add('hidden');
            scoreEl.textContent = score;
            nextButton.classList.add('hidden');
            feedbackEl.textContent = '';
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                endGame();
                return;
            }

            isAnswered = false;
            optionsContainer.innerHTML = '';
            feedbackEl.textContent = '';
            nextButton.classList.add('hidden');

            const currentQuestion = questions[currentQuestionIndex];
            countryNameEl.textContent = currentQuestion.country;
            questionCountEl.textContent = `${currentQuestionIndex + 1}/${questions.length}`;

            const correctAnswer = currentQuestion.capital;
            const allCapitals = allQuestions.map(q => q.capital);
            const distractors = shuffleArray(allCapitals.filter(c => c !== correctAnswer)).slice(0, 3);
            
            let options = shuffleArray([correctAnswer, ...distractors]);

            options.forEach(capital => {
                const button = document.createElement('button');
                button.textContent = capital;
                button.setAttribute('data-capital', capital);
                button.onclick = () => checkGuess(capital, button);
                // ë°˜ì‘í˜• íŒ¨ë”©ê³¼ í…ìŠ¤íŠ¸ í¬ê¸° ì ìš©
                button.className = 'option-btn w-full p-4 sm:p-5 border-2 border-green-200 rounded-xl text-base sm:text-lg font-semibold bg-white text-teal-700 transition duration-150 shadow-sm';
                optionsContainer.appendChild(button);
            });

            countryNameEl.classList.remove('animate-pulse');
            setTimeout(() => countryNameEl.classList.add('animate-pulse'), 10);
        }

        function checkGuess(selectedCapital, clickedButton) {
            if (isAnswered) return;
            isAnswered = true;
            
            const currentQuestion = questions[currentQuestionIndex];
            const correctAnswer = currentQuestion.capital;
            
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.disabled = true;
                btn.classList.replace('bg-white', 'bg-gray-50');
                btn.classList.replace('text-teal-700', 'text-gray-400');
                btn.classList.replace('border-green-200', 'border-gray-100');
            });

            if (selectedCapital === correctAnswer) {
                score++;
                scoreEl.textContent = score;
                feedbackEl.textContent = `âœ¨ ì •ë‹µ! ì—­ì‹œ ëŒ€ë‹¨í•˜ì‹œë„¤ìš”.`;
                feedbackEl.className = 'min-h-[28px] text-center text-lg font-bold text-green-500 mt-2';
                clickedButton.classList.replace('bg-gray-50', 'bg-green-400');
                clickedButton.classList.replace('text-gray-400', 'text-white');
                clickedButton.classList.add('ring-4', 'ring-green-100');
            } else {
                feedbackEl.textContent = `ğŸ¤” ì•„ì‰¬ì›Œìš”! ì •ë‹µì€ '${correctAnswer}' ì…ë‹ˆë‹¤.`;
                feedbackEl.className = 'min-h-[28px] text-center text-lg font-bold text-red-400 mt-2';
                clickedButton.classList.replace('bg-gray-50', 'bg-red-400');
                clickedButton.classList.replace('text-gray-400', 'text-white');
                
                document.querySelectorAll('.option-btn').forEach(btn => {
                    if (btn.getAttribute('data-capital') === correctAnswer) {
                         btn.classList.replace('bg-gray-50', 'bg-green-100');
                         btn.classList.replace('text-gray-400', 'text-green-700');
                         btn.classList.add('border-green-300');
                    }
                });
            }
            
            nextButton.classList.remove('hidden'); 
            nextButton.focus();
        }

        function loadNextQuestion() {
            if (!isAnswered) return;
            currentQuestionIndex++;
            loadQuestion();
        }

        function endGame() {
            finalScoreEl.textContent = `${score} / ${questions.length}`;
            gameOverModal.classList.remove('hidden');
        }

        function restartGame() {
            initializeGame();
        }

        window.onload = initializeGame;
    </script>
</body>
</html>
